<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
<script>
var urls = '';
var openwindows = [];
var opensize = 50;
function geturls() {
    var xmlhttp = new XMLHttpRequest();
    xmlhttp.onreadystatechange = function(){
        if(xmlhttp.status == 200 && xmlhttp.readyState == 4){
            urls = xmlhttp.responseText;
        }
    };
    xmlhttp.open("GET","https://raw.githubusercontent.com/shimeche/line1111/master/urls.txt",true);
    xmlhttp.send();
}
function openurls(size) {
    var lines = urls.split('\n');
    if (lines.length < opensize) {
        opensize = lines.length;
    }
    for(var i = 0; i < opensize; i++){
        if (lines[i] != '' && lines[i].includes('http')) {
            openwindows.push(window.open(lines[i]));
            // console.log(lines[i])
        }
    }
}
function closeurls() {
    openwindows.forEach((element, index) => {
        element.close();
        delete openwindows[index];
    });
}
function ValidURL(str) {
  var pattern = new RegExp('^(https?:\/\/)?'+ // protocol
    '((([a-z\d]([a-z\d-]*[a-z\d])*)\.)+[a-z]{2,}|'+ // domain name
    '((\d{1,3}\.){3}\d{1,3}))'+ // OR ip (v4) address
    '(\:\d+)?(\/[-a-z\d%_.~+]*)*'+ // port and path
    '(\?[;&a-z\d%_.~+=-]*)?'+ // query string
    '(\#[-a-z\d_]*)?$','i'); // fragment locater
  if(!pattern.test(str)) {
    return false;
  } else {
    return true;
  }
}
window.onload = function () {
    opensize = document.getElementById('urlsize').value
    geturls();    
};
</script>
<body>
    <div class="container">
        <input type="text" class="form-control" id="urlsize" value="50">

        <button type="button" class="btn btn-primary" onclick="openurls(50);">開50個</button>
        <button type="button" class="btn btn-primary" onclick="openurls(50);">開100個</button>
        <button type="button" class="btn btn-primary" onclick="closeurls(50);">關閉已開啟的</button>
    </div>
</body>
